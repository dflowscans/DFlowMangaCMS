@{
    ViewData["Title"] = "Change Password";
}

<div class="container" style="max-width: 400px; margin-top: 4rem;">
    <div style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 10px; padding: 2rem;">
        <h2 style="text-align: center; margin-bottom: 2rem; color: var(--primary-light);">
            <i class="fas fa-key me-2"></i>Change Password
        </h2>

        @if (TempData["SuccessMessage"] != null)
        {
            <div style="background: rgba(16, 185, 129, 0.1); border-left: 4px solid #10b981; padding: 1rem; margin-bottom: 1rem; border-radius: 5px; color: #86efac;">
                <strong>Success</strong>
                <p style="margin: 0.5rem 0 0 0; font-size: 0.9rem;">@TempData["SuccessMessage"]</p>
            </div>
        }

        @if (ViewData.ModelState.Values.SelectMany(v => v.Errors).Count() > 0)
        {
            <div style="background: rgba(239, 68, 68, 0.1); border-left: 4px solid #ef4444; padding: 1rem; margin-bottom: 1rem; border-radius: 5px; color: #fca5a5;">
                <strong>Error</strong>
                @foreach (var modelState in ViewData.ModelState.Values)
                {
                    @foreach (var error in modelState.Errors)
                    {
                        <p style="margin: 0.5rem 0 0 0; font-size: 0.9rem;">@error.ErrorMessage</p>
                    }
                }
            </div>
        }

        <form method="post" action="@Url.Action("ChangePassword", "Auth")">
            @Html.AntiForgeryToken()

            <div class="mb-3">
                <label for="currentPassword" style="color: var(--text-secondary); font-weight: 500; margin-bottom: 0.5rem; display: block;">
                    <i class="fas fa-lock me-1"></i>Current Password
                </label>
                <input type="password" id="currentPassword" name="currentPassword" class="form-control" 
                       style="background: var(--bg-dark); border: 1px solid var(--border-color); color: var(--text-primary); border-radius: 5px; padding: 0.75rem;"
                       placeholder="Enter your current password" required />
            </div>

            <div class="mb-3">
                <label for="newPassword" style="color: var(--text-secondary); font-weight: 500; margin-bottom: 0.5rem; display: block;">
                    <i class="fas fa-lock me-1"></i>New Password
                </label>
                <input type="password" id="newPassword" name="newPassword" class="form-control" 
                       style="background: var(--bg-dark); border: 1px solid var(--border-color); color: var(--text-primary); border-radius: 5px; padding: 0.75rem;"
                       placeholder="Enter new password (minimum 6 characters)" required minlength="6" />
                <small style="color: var(--text-muted);">Must be at least 6 characters</small>
            </div>

            <div class="mb-3">
                <label for="confirmPassword" style="color: var(--text-secondary); font-weight: 500; margin-bottom: 0.5rem; display: block;">
                    <i class="fas fa-lock me-1"></i>Confirm New Password
                </label>
                <input type="password" id="confirmPassword" name="confirmPassword" class="form-control" 
                       style="background: var(--bg-dark); border: 1px solid var(--border-color); color: var(--text-primary); border-radius: 5px; padding: 0.75rem;"
                       placeholder="Confirm new password" required minlength="6" />
            </div>

            <button type="submit" class="btn btn-primary w-100" style="margin-top: 1.5rem; border-radius: 5px; padding: 0.75rem;">
                <i class="fas fa-check me-2"></i>Update Password
            </button>
        </form>

        <hr style="border-color: var(--border-color); margin: 1.5rem 0;" />

        <p style="text-align: center; color: var(--text-muted); margin: 0;">
            <a href="@Url.Action("Index", "Home")" style="color: var(--primary-light); text-decoration: none; font-weight: 600;">
                ‚Üê Back to Home
            </a>
        </p>
    </div>
</div>
